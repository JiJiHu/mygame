# æ¸¸æˆç½‘ç«™ç«¯å£åˆå¹¶æ›´æ–°

## æ—¥æœŸï¼š2026-02-09

## åˆå¹¶åŒç«¯å£ä¸ºå•ç«¯å£

### å˜æ›´è¯´æ˜

**ä¹‹å‰ï¼ˆåŒç«¯å£æ¨¡å¼ï¼‰ï¼š**
- 8080ï¼šæ¸¸æˆç½‘ç«™ï¼ˆPython HTTP Serverï¼‰
- 8081ï¼šæ’è¡Œæ¦œAPIï¼ˆNode.js + Expressï¼‰

**ç°åœ¨ï¼ˆå•ç«¯å£æ¨¡å¼ï¼‰ï¼š**
- 8080ï¼šæ¸¸æˆç½‘ç«™ + æ’è¡Œæ¦œAPIï¼ˆNode.js + Express åˆå¹¶ï¼‰

---

### ä¼˜åŠ¿

1. **å‡å°‘ç«¯å£æ•°é‡**ï¼šåªéœ€è¦å¼€æ”¾ä¸€ä¸ª8080ç«¯å£
2. **ç®€åŒ–é…ç½®**ï¼šé˜¿é‡Œäº‘å®‰å…¨ç»„åªéœ€é…ç½®ä¸€ä¸ªç«¯å£è§„åˆ™
3. **ç»Ÿä¸€ç®¡ç†**ï¼šä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªæ—¥å¿—æ–‡ä»¶
4. **é™ä½å¤æ‚åº¦**ï¼šå‡å°‘æœåŠ¡ä¾èµ–
5. **æ›´æ˜“éƒ¨ç½²**ï¼šä¸éœ€è¦ç®¡ç†å¤šä¸ªæœåŠ¡

---

### æŠ€æœ¯å®ç°

ä½¿ç”¨äº†Expressçš„Express.jsæœåŠ¡å™¨ï¼ŒåŒæ—¶æä¾›ï¼š
- **é™æ€æ–‡ä»¶æœåŠ¡**ï¼š`app.use(express.static(...))`
- **APIè·¯ç”±æœåŠ¡**ï¼š`app.get()`, `app.post()`, `app.delete()`

è·¯ç”±è§„åˆ™ï¼š
- `/api/ leaderboard/:game` â†’ APIç«¯ç‚¹
- å…¶ä»–æ‰€æœ‰è·¯å¾„ â†’ é™æ€æ–‡ä»¶

---

### ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `game-server.js` | æ–°å¢ï¼šåˆå¹¶åçš„æœåŠ¡å™¨ï¼ˆæ›¿ä»£æ—§çš„PythonæœåŠ¡å™¨å’Œleaderboard-server.jsï¼‰ |
| `start-server.sh` | æ›´æ–°ï¼šå¯åŠ¨æ–°çš„åˆå¹¶æœåŠ¡å™¨ |
| `stop-server.sh` | æ›´æ–°ï¼šåœæ­¢åˆå¹¶æœåŠ¡å™¨ï¼Œæ¸…ç†æ—§è¿›ç¨‹ |
| `snake/snake.html` | APIåœ°å€ï¼š8080ç«¯å£ + ç›¸å¯¹è·¯å¾„ |
| `sudoku/sudoku.html` | APIåœ°å€ï¼š8080ç«¯å£ + ç›¸å¯¹è·¯å¾„ |
| `admin.html` | APIåœ°å€ï¼š8080ç«¯å£ + ç›¸å¯¹è·¯å¾„ |

---

### APIåœ°å€å˜æ›´

**æ—§åœ°å€ï¼š**
```
http://150.40.177.181:8080 - æ¸¸æˆç½‘ç«™
http://150.40.177.181:8081/api/leaderboard/:game - API
```

**æ–°åœ°å€ï¼š**
```
http://150.40.177.181:8080 - æ¸¸æˆç½‘ç«™ + API
http://150.40.177.181:8080/api/leaderboard/:game - APIç«¯ç‚¹
```

**å‰ç«¯APIé…ç½®ï¼š**
```javascript
// æ—§é…ç½®
const API = window.location.protocol + '//' + window.location.hostname + ':8081/api/leaderboard/snake';

// æ–°é…ç½®ï¼ˆè‡ªåŠ¨é€‚é…ï¼‰
const API = window.location.origin + '/api/leaderboard/snake';
```

---

### æœåŠ¡ç®¡ç†

**å¯åŠ¨æœåŠ¡ï¼š**
```bash
cd ~/myopencode/games
./start-server.sh
```

**åœæ­¢æœåŠ¡ï¼š**
```bash
cd ~/myopencode/games
./stop-server.sh
```

**æŸ¥çœ‹æ—¥å¿—ï¼š**
```bash
tail -f /tmp/game-server.log
```

**æŸ¥çœ‹è¿›ç¨‹ï¼š**
```bash
ps aux | grep "game-server.js"
```

---

### æµ‹è¯•éªŒè¯

âœ… æ‰€æœ‰APIç«¯ç‚¹æµ‹è¯•é€šè¿‡ï¼š

1. **å¥åº·æ£€æŸ¥ï¼š**
```bash
curl http://localhost:8080/api/health
# è¿”å›ï¼š{"success": true, "message": "æ¸¸æˆæœåŠ¡å™¨è¿è¡Œä¸­"}
```

2. **è·å–æ’è¡Œæ¦œï¼š**
```bash
curl http://localhost:8080/api/leaderboard/snake
# è¿”å›ï¼š{"success": true, "leaderboard": []}
```

3. **ä¿å­˜åˆ†æ•°ï¼š**
```bash
curl -X POST http://localhost:8080/api/leaderboard/snake \
  -H "Content-Type: application/json" \
  -d '{"name":"æµ‹è¯•","score":100}'
# è¿”å›ï¼š{"success": true, "leaderboard": [...]}
```

4. **æ¸…ç©ºæ’è¡Œæ¦œï¼š**
```bash
curl -X DELETE http://localhost:8080/api/leaderboard/snake
# è¿”å›ï¼š{"success": true, "message": "å·²æ¸…ç©º"}
```

5. **é™æ€æ–‡ä»¶ï¼š**
```bash
curl -I http://localhost:8080/
# è¿”å›ï¼šHTTP/1.1 200 OK
```

---

### é˜¿é‡Œäº‘å®‰å…¨ç»„é…ç½®æ›´æ–°

**æ—§çš„é…ç½®ï¼ˆåŒç«¯å£ï¼‰ï¼š**
- TCP 8080ï¼šæ¸¸æˆç½‘ç«™
- TCP 8081ï¼šæ’è¡Œæ¦œAPI

**æ–°çš„é…ç½®ï¼ˆå•ç«¯å£ï¼‰ï¼š**
- TCP 8080ï¼šæ¸¸æˆç½‘ç«™ + æ’åæ¦œAPI âœ…

**æ“ä½œï¼š**
1. åˆ é™¤å®‰å…¨ç»„ä¸­ TCP 8081 è§„åˆ™
2. ä¿ç•™ TCP 8080 è§„åˆ™

---

### è®¿é—®åœ°å€ï¼ˆæ›´æ–°åï¼‰

### å†…ç½‘è®¿é—®
- æ¸¸æˆç½‘ç«™ + APIï¼š`http://172.31.3.233:8080`
- ç®¡ç†é¢æ¿ï¼š`http://172.31.3.233:8080/admin.html`

### å¤–ç½‘è®¿é—®
- æ¸¸æˆç½‘ç«™ + APIï¼š`http://150.40.177.181:8080`
- ç®¡ç†é¢æ¿ï¼š`http://150.40.177.181:8080/admin.html`

---

### åºŸå¼ƒçš„æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å·²ä¸å†ä½¿ç”¨ï¼Œä½†ä¿ç•™åœ¨ç›®å½•ä¸­ä½œä¸ºå¤‡ä»½ï¼š

- `leaderboard-server.js` - æ—§çš„ç‹¬ç«‹æ’è¡Œæ¦œAPIæœåŠ¡å™¨
- `start-leaderboard.sh` - æ—§çš„æ’è¡Œæ¦œAPIå¯åŠ¨è„šæœ¬
- `stop-leaderboard.sh` - æ—§çš„æ’è¡Œæ¦œAPIåœæ­¢è„šæœ¬

è¿™äº›æ–‡ä»¶å¯ä»¥å®‰å…¨åˆ é™¤ï¼Œæˆ–ä¿ç•™ä½œä¸ºå‚è€ƒã€‚

---

### å›æ»šæ–¹æ¡ˆ

å¦‚æœéœ€è¦å›æ»šåˆ°åŒç«¯å£æ¨¡å¼ï¼š

1. æ¢å¤æ—§æ–‡ä»¶ï¼š
```bash
# ä½¿ç”¨ git æ¢å¤
git checkout leaderboard-server.js start-leaderboard.sh stop-leaderboard.sh

# æˆ–ä»å¤‡ä»½æ¢å¤
```

2. ä¿®æ”¹å¯åŠ¨è„šæœ¬ä½¿ç”¨æ—§çš„æœåŠ¡å™¨

3. æ¢å¤æ¸¸æˆæ–‡ä»¶ä¸­çš„APIåœ°å€ï¼ˆ8081ç«¯å£ï¼‰

4. åœ¨é˜¿é‡Œäº‘å®‰å…¨ç»„æ·»åŠ 8081ç«¯å£è§„åˆ™

---

### æœåŠ¡å™¨æ—¥å¿—ç¤ºä¾‹

```
ğŸ® ==================================
ğŸ®   æ¸¸æˆæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
ğŸ® ==================================

ğŸ“¡ ç›‘å¬ç«¯å£: 8080
ğŸŒ æœ¬åœ°è®¿é—®: http://localhost:8080
ğŸŒ å¤–ç½‘è®¿é—®: http://150.40.177.181:8080

ğŸ“ é™æ€æ–‡ä»¶: /root/myopencode/games
ğŸ“Š æ’è¡Œæ¦œAPI: http://0.0.0.0:8080/api/leaderboard/:game
â¤ï¸  å¥åº·æ£€æŸ¥: http://0.0.0.0:8080/api/health

ğŸ“„ æ—¥å¿—æ–‡ä»¶: /tmp/game-server.log

[2026-02-09T09:00:12.459Z] GET    /api/health                              | ::1
[2026-02-09T09:00:26.369Z] GET    /api/leaderboard/snake                   | ::1
ğŸ“Š è·å– snake æ’è¡Œæ¦œ: 0 æ¡è®°å½•
[2026-02-09T09:01:07.456Z] POST   /api/leaderboard/snake                   | ::1
ğŸ“ æ¥æ”¶ snake åˆ†æ•°: æµ‹è¯•ç©å®¶
âœ… ä¿å­˜ snake åˆ†æ•°: æµ‹è¯•ç©å®¶ - 150åˆ†
```

---

## æ€»ç»“

âœ… **æˆåŠŸåˆå¹¶åŒç«¯å£ä¸ºå•ç«¯å£**

**ä¸»è¦æ”¹è¿›ï¼š**
- ç®€åŒ–éƒ¨ç½²ï¼Œå‡å°‘ç«¯å£é…ç½®
- ç»Ÿä¸€æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºç›‘æ§
- é™ä½ç³»ç»Ÿå¤æ‚åº¦
- ä¿æŒæ‰€æœ‰åŠŸèƒ½å®Œæ•´

**å…¼å®¹æ€§ï¼š**
- å‰ç«¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè‡ªåŠ¨é€‚é…è®¿é—®åœ°å€
- æ‰€æœ‰æ¸¸æˆå’Œç®¡ç†é¢æ¿å·²æ›´æ–°APIåœ°å€
- å‘åå…¼å®¹ï¼ŒAPIæ¥å£æ— å˜åŒ–

**ä¸‹ä¸€æ­¥ï¼š**
- åœ¨é˜¿é‡Œäº‘å®‰å…¨ç»„åˆ é™¤8081ç«¯å£è§„åˆ™
- æ¸…ç†åºŸå¼ƒæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

---

*æ›´æ–°æ—¶é—´ï¼š2026-02-09 17:01*
